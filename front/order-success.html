<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Order Confirmed - YallaOrder</title>
    <link rel="stylesheet" href="css/style.css">
</head>
<body>
    <!-- Navigation -->
    <nav class="navbar">
        <div class="nav-container">
            <a href="index.html" class="logo">YallaOrder</a>
            <ul class="nav-links">
                <li><a href="restaurants.html">Restaurants</a></li>
            </ul>
            <div class="user-info"></div>
        </div>
    </nav>

    <!-- Success Message -->
    <section class="section">
        <div class="container">
            <div style="max-width: 600px; margin: 0 auto; text-align: center;">
                <div style="font-size: 5rem; margin-bottom: 1rem;">âœ…</div>
                <h1 style="color: var(--success-color); margin-bottom: 1rem;">Order Confirmed!</h1>
                <p style="font-size: 1.2rem; color: var(--text-light); margin-bottom: 2rem;">
                    Thank you for your order! Your food is being prepared.
                </p>

                <!-- Order Details -->
                <div class="summary-section" style="text-align: left;">
                    <h3 class="summary-title">Order Details</h3>
                    <div id="orderDetails">
                        <!-- Order details will be loaded here -->
                    </div>
                </div>

                <!-- Actions -->
                <div class="mt-3" style="display: flex; gap: 1rem; justify-content: center;">
                    <a href="restaurants.html" class="btn btn-primary">Order Again</a>
                    <a href="index.html" class="btn btn-secondary">Go Home</a>
                </div>
            </div>
        </div>
    </section>

    <script src="js/utils.js"></script>
    <script src="js/api.js"></script>
    <script>
        const urlParams = new URLSearchParams(window.location.search);
        const orderId = urlParams.get('id');

        async function loadOrderDetails() {
            if (!orderId) {
                window.location.href = 'index.html';
                return;
            }

            try {
                const orderData = await orderAPI.getSummary(orderId);
                const order = orderData.order;
                const items = orderData.items;

                document.getElementById('orderDetails').innerHTML = `
                    <div class="summary-row">
                        <span>Order ID:</span>
                        <span><strong>${order.id}</strong></span>
                    </div>
                    <div class="summary-row">
                        <span>Phone:</span>
                        <span>${order.phone}</span>
                    </div>
                    <div class="summary-row">
                        <span>Delivery Location:</span>
                        <span>${order.delivery_location}</span>
                    </div>
                    <div class="summary-row">
                        <span>Order Type:</span>
                        <span style="text-transform: capitalize;">${order.order_type}</span>
                    </div>
                    <div class="summary-row">
                        <span>Total Items:</span>
                        <span>${items.length}</span>
                    </div>
                    <div class="summary-row">
                        <span>Total Amount:</span>
                        <span class="cart-total-amount">${format.currency(order.total)}</span>
                    </div>
                    <div class="summary-row">
                        <span>Order Date:</span>
                        <span>${format.date(order.created_at)}</span>
                    </div>
                `;
            } catch (error) {
                document.getElementById('orderDetails').innerHTML = `
                    <div class="alert alert-error">
                        Failed to load order details.
                    </div>
                `;
                console.error('Error loading order:', error);
            }
        }

        loadOrderDetails();
    </script>
</body>
</html>